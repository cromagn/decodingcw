import numpy as np
import scipy as sp

morseChar={'A':[0,0,1,0,1,1,1,0,0], 'B': [0,0,1,1,1,0,1,0,1,0,1,0,0],'C':[0,0,1,1,1,0,1,0,1,1,1,0,1,0,0], 'D': [0,0,1,1,1,0,1,0,1,0,0],
           'E':[0,0,1,0,0], 'F': [0,0,1,0,1,0,1,1,1,0,1,0,0],'G':[0,0,1,1,1,0,1,1,1,0,1,0,0], 'H': [0,0,1,0,1,0,1,0,1,0,0],
           'I':[0,0,1,0,1,0,0], 'J': [0,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,0],'K':[0,0,1,1,1,0,1,0,1,1,1,0,0], 'L': [0,0,1,0,1,1,1,0,1,0,1,0,0],
           'M':[0,0,1,1,1,0,1,1,1,0,0], 'N': [0,0,1,1,1,0,1,0,0],'O':[0,0,1,1,1,0,1,1,1,0,1,1,1,0,0], 'P': [0,0,1,0,1,1,1,0,1,1,1,0,1,0,0],
           'Q':[0,0,1,1,1,0,1,1,1,0,1,0,1,1,1,0,0], 'R': [0,0,1,0,1,1,1,0,1,0,0],'S':[0,0,1,0,1,0,1,0,0], 'T': [0,0,1,1,1,0,0],
           'U':[0,0,1,0,1,0,1,1,1,0,0], 'V': [0,0,1,0,1,0,1,0,1,1,1,0,0],'W':[0,0,1,0,1,1,1,0,1,1,1,0,0], 'X': [0,0,1,1,1,0,1,0,1,0,1,1,1,0,0],
           'Y':[0,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,0], '1': [0,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,0],'2':[0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,0],
           '3': [0,0,1,0,1,0,1,0,1,1,1,0,1,1,1,0,0],'4':[0,0,1,0,1,0,1,0,1,0,1,1,1,0,0], '5': [0,0,1,0,1,0,1,0,1,0,1,0,0],'6':[0,0,1,1,1,0,1,0,1,0,1,0,1,0,0],
           '7': [0,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,0],'8': [0,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,0],'9': [0,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,0],'0': [0,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,0],
           'SP': [0,0,0,0,0],'SPW': [0,0,0,0,0,0,0]}
#bits=[0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
#bits=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0]
bits=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0]

#bits = [0,0,1,0,0,0,0,1,0,0,0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0]
#bits = [0,0,1,0,0,0,0,1,0,0,0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0]
# cv= np.correlate(bits,morseChar.get('E'))
# print (cv)
lb = len(bits)
decoded = [0] * lb
for chartofind, representation in morseChar.items():

    le=len(representation)
    res=0
    buckets = [0] * lb

    for b in range(lb-le):
        for i in range(le):
            if (bits[b+i]==representation[i]):
                res=res+1
        buckets[b]=res
        res=0
    maxElement = np.amax(buckets)
    print(maxElement, le)
    if(maxElement==le):
        result = np.where(buckets == np.amax(buckets))
        for x in result:
            decoded[x[0]]=chartofind
print(decoded)
X =  [x for x in decoded if not x==0]
print(X)

